<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <title> Assignment - Regular CallBack Hell - Promise - async-await</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
        integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">

</head>

<body>
    <script src="js/app.js"></script>
    <div class="container">
        <h1 class="alert alert-info m-4"> Assignment - Regular CallBack Hell - Promise - async-await</h1>
        <hr>
       
            <br><br> 
            <b>Examples </b>
            <br>
            <br>

            <b>*</b> Print Cards - using normal callback methods in Regular Synchronous JS
            <br>
            --- Output -->
                <script> 

                    createContent = (function_ld) => {

                       setTimeout( () => {

                            let content = Math.random() > 0.1 ? true : false;

                            if ( content === true ) {
                                console.log(`- content is ready. Go for Designing.`);
                                function_ld(printFinal);
                            }
                            else {
                                console.log(`* Content is not yet ready. Try Again.`)
                            }

                       }, 8000  )

                    }
                    
                    letsDesign = (function_pf) => {

                        setTimeout ( () => {

                            let design = Math.random() > 0.2 ? true : false;

                            if (design) {
                                console.log("-- Design is ready. Go for Print.");
                                function_pf();
                            }
                            else {
                                console.log("* Design is not yet ready. Hold on.");
                            }

                        }, 1000 )

                    }

                    printFinal = () => {

                        setTimeout( () => {

                            let approval = Math.random() > 0.5 ? true : false;

                            if (approval) {
                                console.log("--- Got the Approval. Printed Finally.");
                            }
                            else {
                                console.log("* Wait for final Approval.");
                            }

                        },1000 );

                    }

                    createContent(letsDesign);

                </script>
            <br>
            <br>

            <br>
            <br>

            <b>*</b> Website Development - using Promise in Asynchronous JS ( .then & .catch )
            <br>
            --- Output -->
                <script> 

                    analyzeRequirements = () => {

                        return new Promise ( ( resolve, reject ) => {

                            setTimeout ( () => {

                                let requirements = Math.random() > 0.1 ? true : false;

                                    if ( requirements ) {
                                        resolve(` - Requirements Analyzed. Go for Development. `);
                                    } 
                                    else {
                                        reject(" * Requirement is not yet analyzed. ");
                                    }

                            }, 4000 )

                        } )

                    }

                    developeWebsite = () => {

                        return new Promise ( ( resolve, reject ) => {

                            setTimeout( () => {

                                let developed = Math.random() > 0.3 ? true : false ;

                                if ( developed ) {
                                    resolve(" -- Development is completed. Go for Deployment. ");
                                }
                                else {
                                    reject(" * Development is incomplete. Wait.");
                                }

                            }, 1000 )

                        } )

                    }

                    deployProject = () => {

                        return new Promise ( ( resolve, reject ) => {

                            setTimeout( () => {

                                let deploy = Math.random() > 0.4 ? true : false;

                                if ( deploy ) {
                                    resolve (" --- Let's deploy the Site.");
                                }
                                else {
                                    reject("* Something wrong. Stay Tuned.");
                                }

                            }, 1000 )

                        } )

                    }

                    analyzeRequirements()
                        .then( (res) => {
                                console.log(res);
                                return developeWebsite(); // returns Promise     
                        } )
                        .then ( (res) => {
                            console.log(res);
                            return deployProject(); // returns Promise
                        } )
                        .then ( (res) => {
                            console.log(res);
                        } )
                        .catch( (rej) => {
                                console.log(rej);  
                        } )

                </script>
            <br>
            <br>

            <br>
            <br>

            <b>*</b> Software Development - using Promise - async-await in Asynchronous JS ( try catch )
            <br>
            --- Output -->
                <script> 

                collectRequirements = () => {

                    return new Promise ( ( resolve, reject) => {

                        setTimeout( () => {

                            let requi = Math.random() > 0.2 ? true : false;

                            if ( requi ) {
                                resolve ("- Collected Requirements for Software Development. Go for Development.");
                            }
                            else {
                                reject ("* Requirements are not clear. Hold on. ");
                            }

                        }, 1000 )

                    } )

                }

                developeSoftw = () => {
                    
                    return new Promise( ( resolve, reject) => {

                        setTimeout( () => {

                            let devStatus = Math.random() > 0.4 ? true : false;

                            if ( devStatus ) {
                                resolve ("-- Development is accomplished. Go for Deployment.");
                            }
                            else { 
                                reject("* Some Issues in Development. Wait.");
                            }

                        }, 1000 )

                    } )

                }

                deploySoftw = () => {

                    return new Promise ( ( resolve, reject) => { 

                        setTimeout( () => {

                            let readyDep = Math.random() > 0.3 ? true : false;

                            if (readyDep) {
                                resolve("--- Deployed the Software !!!");
                            }
                            else {
                                reject("* Some issues in deployment.");
                            }

                        }, 1000 )

                    } ) 

                }

                async function init() {

                    try {
                        let cr = await collectRequirements();
                        console.log(cr);
                        let ds = await developeSoftw();
                        console.log(ds);
                        let dep = await deploySoftw();
                        console.log(dep);
                    }   
                    catch (err) {
                        console.log(err);
                    }

                }

                init();

                </script>
            <br>
            <br>


        </p>

      
    </div>

</body>

</html>
